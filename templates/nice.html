<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DELISH</title>

    <link rel="stylesheet" href="css/tailwind.css">
    <link rel="stylesheet" href="css/tooplate-antique-cafe.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tooplate-antique-cafe.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600&family=Oswald:wght@600&display=swap" rel="stylesheet">
    

    <script src="{{ url_for('static', filename='js/bot.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery-3.6.0.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.singlePageNav.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/parallax.min.js') }}"></script>
   
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600&family=Oswald:wght@600&display=swap" rel="stylesheet">
    <style>
        /* CSS for div1 (Chatbot) */
        .chatbot-container {
            width: 30%; /* Set the width of the left div */
            float: right; /* Float left to position to the left */
            padding: 20px;
            
        }

        /* CSS for div2 (Cafe Menu) */
        .menu-container {
            width: 70%; /* Set the width of the right div */
            float: left; /* Float right to position to the right */
        }

        /* Additional CSS */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        body {
         margin: 0;
         padding: 0;
         font-family: "Merriweather", serif;
         background-color: #f2f2f2;
         background-image: url('back.jpg');
         background-size: cover;
         background-position: center;
         overflow: hidden;

         
     }
     
     .mobile-screen {
         max-width: 360px;
        
         padding: 15px;
         background-color: rgba(255, 255, 255, 0.7); /* Adjust the opacity as needed */
         box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
         border-radius: 10px;
         border: 3px solid black;
     }
     
     h1 {
         text-align: center;
         font-family: Oswald, sans-serif;
         font-size: 25px;
     }
     
     #chat-container {
        height: 430px;
         border: 1px solid #ccc;
         padding: 10px;
         border-radius: 5px;
         background-color: #f9f9f9;
         margin-bottom: 20px;
         border: 2px solid black;
     }
     
     textarea {
        width: calc(95%);
                padding: 10px;
               
                border-radius: 20px;
                margin-top: 10px;
                resize: none;
                font-size: 16px;
                height: 12%;
                overflow: hidden;
                border: 1px solid black;
         
     }
     
     button {
         width: calc(95%);
         padding: 2px;
         color: white;
         border: none;
         cursor: pointer;
         border-radius: 5px;
         font-family: "Merriweather", serif;
         font-size: 16px;
     }
     
     button:hover {
         background-color: #481E14;
     }
     
     .output {
         max-height: 240px;
         overflow-y: auto;
         padding: 10px;
         border: 1px solid #ccc;
         border-radius: 5px;
         background-color: white;
         font-family: "Merriweather", serif;
         font-size: 14px;
         height: 95%;
         background-image: url('static/img/Stories.jpeg'); /* Add your background image URL */
    background-size: cover; /* Cover the entire background */
    background-repeat: no-repeat;
     }
     

        /* Rest of your CSS styles */
        /* ... */
    </style>
</head>
<body>
    <!-- Div1: Chatbot -->
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: Arial, sans-serif;
                background-color: #f2f2f2;
            }
    
            #chat-container {
                max-width: 500px;
                margin: 20px auto;
                padding: 20px;
                background-color: #fff;
                border-radius: 10px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }
    
            .message-container {
                display: flex;
                margin-bottom: 10px;
            }
    
            .message {
                max-width: 70%;
                padding: 10px;
                border-radius: 10px;
            }
    
            .user-message {
                background-color: #dcf8c6;
                align-self: flex-end;
            }
    
            .bot-message {
                background-color: #f2f2f2;
                align-self: flex-start;
            }
    
            .output {
                width: calc(95%);
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 20px;
                margin-top: 10px;
                resize: none;
                font-size: 16px;
                border: 1px solid black;
            }
    
            .send-button {
                width: 80px;
                padding: 10px;
                border: none;
                background-color: #007bff;
                color: #fff;
                border-radius: 50%;
                margin-left: 10px;
                cursor: pointer;
            }
            /* Modal Styling */
            .modal {
                display: none; /* Hidden by default */
                position: fixed; /* Stay in place */
                z-index: 1; /* Sit on top */
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
               align-items: center;
                background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            }
            #Minimize-button {
             width: 40px; /* Adjust width as needed */
             padding: 10px; /* Adjust padding as needed */
             border: none;
             background-color: #007bff; /* Same as send button */
             color: #fff; /* Same as send button */
             border-radius: 50%; /* Same as send button */
             cursor: pointer;
}
            p a {
	color: rgb(21, 92, 9);
}

p a:hover {
	color: rgb(6, 36, 62);
}
            .avatar {
                width: 70px; /* Adjust size as needed */
                height: 70px; /* Adjust size as needed */
                margin-top: 20px;
                margin-left:40%;
                border-radius: 50%;
                border: 2px solid black;
            }
            .modal-content {
                background-color: #fefefe;
                margin: 15% auto; /* 20% from the top and centered */
                padding: 20px;
                border: 1px solid #888;
                width: 30%; /* Could be more or less, depending on screen size */
                border-radius: 10px;
            }
    
            /* Quick Replies */
            .quick-replies {
                margin-top: auto; /* Push to the bottom */
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
            }
    
            .quick-reply-button {
                margin: 5px;
                padding: 10px 20px;
                background-color: #4CAF50;
                color: white;
                border: none;
                cursor: pointer;
                border-radius: 5px;
                font-family: "Merriweather", serif;
                font-size: 16px;
            }
    
            .quick-reply-button:hover {
                background-color: brown;
            }

            #btn_avatar {
                background-image: url('static/img/pic.jpg');
    background-size: cover;
    background-size: 100% 100;
    background-position: center; /* Adjust as needed */
    background-repeat: no-repeat;
    animation: gradientAnimation 10s ease infinite;
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    margin-top: 5px;
    cursor: pointer;
    margin-left: 46%;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
    outline: none;
}

.box-button {
    position: fixed;
    top: 35px; /* Adjust as needed */
    right: 70px; /* Adjust as needed */
    display: inline-block;
    padding: 10px 10px;
    background-color: #f00; /* Red background color */
    color: #fff; /* White text color */
    border: 2px solid #f00; /* Red border */
    border-radius: 8px; /* Rounded corners */
    cursor: pointer; /* Show hand cursor on hover */
    text-decoration: none; /* Remove underline */
    z-index: 999; /* Ensure the button is on top */
}
.box-button:hover {
  background-color: #d32f2f; /* Darker red on hover */
}

#btn_avatar:hover {
    filter: brightness(1.1);
}

#chat-container {
    display: flex;
    flex-direction: row; /* Align items horizontally */
    align-items: center; /* Center items vertically */
}

#send-button,
{
    margin-left: 5px; /* Add margin between buttons */
    padding: 10px; /* Add padding to buttons */
    cursor: pointer; /* Change cursor to pointer on hover */
}

#voice-button {
    width: 30%; /* Set width of voice button */
    background-color: transparent; /* Set background color to transparent */
    border: none; /* Remove border */
}

.voice-icon {
    width: 50px; /* Set width of voice icon to fill button */
    height: 50px; /* Maintain aspect ratio */
}

#chat-container {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.input-section {
    display: flex;
    align-items: center;
}

#input-box {
    width: 80%; /* Adjust as needed */
}

.button-section {
    display: flex;
    margin-left: 10px; /* Adjust as needed */
}

#send-button,
 {
    width:60px;
    margin-left: 5px; /* Adjust as needed */
}
.button-container {
    display: flex;
    width:100%
}

#send-button,
 {
    margin-left: 5px; /* Adjust as needed */
}
        </style>
        <div class="chatbot-container">
        <div class="mobile-screen">
            <a href="/index" class="box-button">Close</a>

            <h1>Chatbot</h1>
            
            <!-- The Modal -->
            <div id="avatarModal" class="modal">
    
                <!-- Modal content -->
                <div class="modal-content">
                    <span class="close" onclick="closeModal()">&times;</span>
                    <h2>Select Avatar</h2>
                    <img src="static/img/avtar3.jpg" alt="Avatar 1" onclick="selectAvatar('static/img/avtar3.jpg')" class="avatar">
                    <img src="static/img/avtar4.jpg" alt="Avatar 2" onclick="selectAvatar('static/img/avtar4.jpg')" class="avatar">
                   
                    <img src="static/img/avtar2.jpg" alt="Avatar 4" onclick="selectAvatar('static/img/avtar2.jpg')" class="avatar">
                </div>
    
            </div>

             <!-- Avatar Selection Button -->
             <button id="btn_avatar" onclick="openModal()" ></button>
    
            <!-- Display Selected Avatar -->
            <img src="static/img/defult.jpg" alt="Chatbot Avatar" class="avatar" id="selected-avatar">
            
            <div id="chat-container">
                <div class="output"></div>
                <textarea id="input-box" placeholder="Type your message here..."></textarea><br>
                <div class="button-container">
                    <button id="send-button" onclick="sendMessage()">Send</button>
                    <button id="voice-button" onclick="sendVoice()">
                        <img src="static/img/voice-recorder.png" alt="Voice" class="voice-icon">
                    </button>
                </div>
            </div>

        </div>
    
        <script>
            // Function to open modal
            function openModal() {
                document.getElementById('avatarModal').style.display = 'block';
            }
    
            // Function to close modal
            function closeModal() {
                document.getElementById('avatarModal').style.display = 'none';
            }
    
            // Function to select an avatar
            function selectAvatar(avatar) {
                const selectedAvatar = document.getElementById('selected-avatar');
                selectedAvatar.src = avatar;
    
                // Hide modal after selection
                closeModal();
            }

            function sendMessage() {
                const inputBox = document.querySelector('.input-box');
                const chatContainer = document.getElementById('chat-container');
    
                const userMessage = inputBox.value.trim();
                if (userMessage) {
                    const messageContainer = document.createElement('div');
                    messageContainer.classList.add('message-container');
                    messageContainer.classList.add('user-message');
    
                    const message = document.createElement('div');
                    message.classList.add('message');
                    message.textContent = userMessage;
    
                    messageContainer.appendChild(message);
                    chatContainer.insertBefore(messageContainer, inputBox);
    
                    inputBox.value = '';
                }
            }
            
            function sendVoice() {
                var outputDiv = document.querySelector(".output");
            
                // Make AJAX call to Flask backend to recognize speech
                var xhr = new XMLHttpRequest();
                xhr.open("GET", "/recognize_speech", true);
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4 && xhr.status == 200) {
                        var response = JSON.parse(xhr.responseText);
                        if (response.hasOwnProperty('text')) {
                            // Update the content of the textarea with the recognized text
                            document.getElementById("input-box").value = response.text;
                        } else if (response.hasOwnProperty('error')) {
                            // Handle error response
                            outputDiv.textContent = response.error;
                        }
                    }
                };
                xhr.send();
            }
            
            
    
            document.getElementById('input-box').addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    sendMessage();
                }
            });
        </script>
    </div>

    <!-- Div2: Cafe Menu -->
    <div class="menu-container">
        <!-- Cafe Menu content goes here -->
         <!-- Cafe Menu -->
    <div id="menu" class="parallax-window" data-parallax="scroll" data-image-src="{{ url_for('static', filename='img/trial2.jpg') }}">
        <div class="container mx-auto tm-container py-24 sm:py-48">
            <div class="text-center mb-16">
                <h2 class="bg-white tm-text-brown py-6 px-12 text-4xl font-medium inline-block rounded-md">Our Resturant Menu</h2>
            </div>            
            <div class="flex flex-col lg:flex-row justify-around items-center">
                <div class="flex-1 m-5 rounded-xl px-4 py-6 sm:px-8 sm:py-10 tm-bg-brown tm-item-container">
                    <div class="flex items-start mb-6 tm-menu-item">
                        <img src="static/img/biriyani.jpg" alt="Image" width="160" height="120"  class="rounded-md">
                        <div class="ml-3 sm:ml-6">
                            <h3 class="text-lg sm:text-xl mb-2 sm:mb-3 tm-text-yellow">Biryani</h3>
                            <div class="text-white text-md sm:text-lg font-light mb-1">H Rs 100</div>
                            <div class="text-white text-md sm:text-lg font-light">F Rs 180</div>
                        </div>                    
                    </div>
                    <div class="flex items-start mb-6 tm-menu-item">
                        <img src="static/img/butter_chicken.jpeg" alt="Image" width="160" height="120"  class="rounded-md">
                        <div class="ml-3 sm:ml-6">
                            <h3 class="text-lg sm:text-xl mb-2 sm:mb-3 tm-text-yellow">Butter Chicken</h3>
                            <div class="text-white text-md sm:text-lg font-light mb-1">H Rs 150</div>
                            <div class="text-white text-md sm:text-lg font-light">F Rs 200</div>
                        </div>                    
                    </div>
                    <div class="flex items-start mb-6 tm-menu-item">
                        <img src="static/img/chole_bhature.jpg" alt="Image" width="160" height="120" class="rounded-md"> 
                        <div class="ml-3 sm:ml-6">
                            <h3 class="text-lg sm:text-xl mb-2 sm:mb-3 tm-text-yellow">chole_bhature</h3>
                            <div class="text-white text-md sm:text-lg font-light mb-1">H Rs 150/- </div>
                            <div class="text-white text-md sm:text-lg font-light">L  Rs 250/-</div>
                        </div>                    
                    </div>
                    <div class="flex items-start mb-6 tm-menu-item">
                        <img src="static/img/chicken-tandoori-non.jpg"  width="160" height="120" alt="Image" class="rounded-md">
                        <div class="ml-3 sm:ml-6">
                            <h3 class="text-lg sm:text-xl tm-text-yellow mb-1">chicken-tandoori-</h3>
                            <h3 class="text-lg sm:text-xl mb-2 sm:mb-3 tm-text-yellow"></h3>
                            <div class="text-white text-md sm:text-lg font-light">Half RS 100/- .Full RS 160/- </div>
                        </div>                    
                    </div>
                </div>
                <div class="flex-1 m-5 rounded-xl px-4 py-6 sm:px-8 sm:py-10 tm-bg-brown tm-item-container">
                    <div class="flex items-start justify-end mb-6 tm-menu-item-2">
                        <div class="text-right mr-6">
                            <h3 class="text-lg sm:text-xl mb-2 sm:mb-3 tm-text-yellow">Pasta</h3>
                            <div class="text-white text-md sm:text-lg font-light mb-1">Small Rs 110</div>
                            <div class="text-white text-md sm:text-lg font-light">Large Rs 155</div>
                        </div>
                        <img src="static/img/pasta.jpeg.jpg" width="160" height="120" alt="Image" class="rounded-md">                   
                    </div>
                    <div class="flex items-start justify-end mb-6 tm-menu-item-2">
                        <div class="text-right mr-6">
                            <h3 class="text-lg sm:text-xl mb-2 sm:mb-3 tm-text-yellow">Taco</h3>
                            <div class="text-white text-md sm:text-lg font-light mb-1">H Rs 100</div>
                            <div class="text-white text-md sm:text-lg font-light">F  Rs 200</div>
                        </div>
                        <img src="static/img/taco.jpeg.jpg" width="160" height="120" alt="Image" class="rounded-md">                    
                    </div>
                    <div class="flex items-start justify-end mb-6 tm-menu-item-2">
                        <div class="text-right mr-6">
                            <h3 class="text-lg sm:text-xl mb-2 sm:mb-3 tm-text-yellow">Cake</h3>
                            <div class="text-white text-md sm:text-lg font-light mb-1">Small Rs 100</div>
                            <div class="text-white text-md sm:text-lg font-light">Large Rs 180</div>
                        </div>   
                        <img src="static/img/cake.jpeg.jpg" width="160" height="120" alt="Image" class="rounded-md">                 
                    </div>
                    <div class="flex items-start justify-end mb-6 tm-menu-item-2">                    
                        <div class="text-right mr-6">
                            <h3 class="text-lg sm:text-xl tm-text-yellow mb-1">South Indian spc</h3>
                            <h3 class="text-lg sm:text-xl mb-2 sm:mb-3 tm-text-yellow"></h3>
                            <div class="text-white text-md sm:text-lg font-light">Half RS 130/- .Full RS 160/-</div>
                        </div> 
                        <img src="static/img/leaf_food.jpg" width="160" height="120" alt="Image" class="rounded-md">                   
                    </div>
                </div>
            </div>
        </div>        
    </div>
        </div>
    </div>

    <script>
        function sendMessage() {
            const inputBox = document.getElementById('input-box');
            const output = document.querySelector('.output');

            const userInput = inputBox.value.trim();
            if (userInput) {
                output.innerHTML += `<p><strong>User:</strong> ${userInput}</p>`;

                fetch('/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: `user_input=${encodeURIComponent(userInput)}`
                })
                .then(response => response.json())
                .then(data => {
                    output.innerHTML += `<p><strong>Chatbot:</strong> ${data.response}</p>`;
                })
                .catch(error => {
                    console.error('Error:', error);
                });

                inputBox.value = '';
            }
        }

        document.getElementById('input-box').addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                sendMessage();
            }
        });
    </script>
</body>
</html>
